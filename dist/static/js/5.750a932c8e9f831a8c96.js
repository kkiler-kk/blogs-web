webpackJsonp([5],{"2d6X":function(t,e){},"3nZr":function(t,e,s){"use strict";e.e=function(t){return t=parseInt(t),Object(o.a)({url:"/follow/follow/"+t,method:"post"})},e.a=function(t){return Object(o.a)({headers:{Authorization:t},url:"/users/info",method:"post"})},e.b=function(t){return Object(o.a)({headers:{Authorization:t},url:"/users/info",method:"post"})},e.c=function(t){return t=parseInt(t),Object(o.a)({url:"/follow/"+t,method:"post"})};var o=s("OOvn")},"7N/7":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("vMJZ"),a=s("3nZr"),i=s("woOf"),l=s.n(i),r={name:"PersonalDia",data:function(){return{dialogVisible:!1,form:{avatar:"",password:"",nickname:"",age:Number,email:"",mobilePhoneNumber:"",sex:Number,id:Number,account:"",area:"",hobby:"",work:"",design:""},rules:{nickname:[{required:!0,message:"昵称不能为空",trigger:"blur"}],password:[{required:!0,message:"账号密码不能为空",trigger:"blur"}]}}},mounted:function(){this.load()},methods:{open:function(){this.dialogVisible=!0},load:function(){var t=this;Object(o.c)(this.$store.state.id).then(function(e){console.log(e),l()(t.form,e.data)}).catch(function(t){console.log(t)})},submit:function(){var t=this;Object(o.updateUser)(this.form).then(function(e){console.log(e),t.dialogVisible=!1,t.$emit("flesh")}).catch(function(t){console.log(t)})},handleClose:function(){this.dialogVisible=!1,this.$emit("flesh")}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"修改个人信息",visible:t.dialogVisible,width:"60%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"150px"}},[s("div",{staticClass:"updateinfo"},[s("div",{staticClass:"left"},[s("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[s("img",{staticStyle:{width:"150px",height:"110px"},attrs:{src:t.form.avatar}})]),t._v(" "),s("el-form-item",{attrs:{label:"账号密码",prop:"password"}},[s("el-input",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[s("el-input",{model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"年龄",prop:"age"}},[s("el-input",{model:{value:t.form.age,callback:function(e){t.$set(t.form,"age",e)},expression:"form.age"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"性别",prop:"sex"}},[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"男","inactive-text":"女","active-value":1,"inactive-value":0},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1),t._v(" "),s("div",{staticClass:"right"},[s("el-form-item",{attrs:{label:"用户编号",prop:"id"}},[s("el-input",{attrs:{disabled:""},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"账号",prop:"account"}},[s("el-input",{attrs:{disabled:""},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"地区",prop:"area"}},[s("el-input",{model:{value:t.form.area,callback:function(e){t.$set(t.form,"area",e)},expression:"form.area"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"兴趣爱好",prop:"hobby"}},[s("el-input",{model:{value:t.form.hobby,callback:function(e){t.$set(t.form,"hobby",e)},expression:"form.hobby"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"职业",prop:"work"}},[s("el-input",{model:{value:t.form.work,callback:function(e){t.$set(t.form,"work",e)},expression:"form.work"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"个性签名",prop:"design"}},[s("el-input",{model:{value:t.form.design,callback:function(e){t.$set(t.form,"design",e)},expression:"form.design"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"手机号码",prop:"mobilePhoneNumber"}},[s("el-input",{model:{value:t.form.mobilePhoneNumber,callback:function(e){t.$set(t.form,"mobilePhoneNumber",e)},expression:"form.mobilePhoneNumber"}})],1)],1)])]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var c={components:{PersonalDia:s("VU/8")(r,n,!1,function(t){s("2d6X")},"data-v-611db3c5",null).exports},name:"Personal",inject:["reload"],data:function(){return{avatar:"",nikeName:"",v:3,signature:"",followCounts:"",fanCounts:"",goodCounts:"",isfollow:!0,aticlesCount:"",followData:{fanId:"",followId:""},isfollowid:[]}},mounted:function(){this.load()},watch:{$route:function(t,e){t.path=="/newsuser/personal/"+this.$store.state.id?this.reload():t.path=="/newsuser/personal/"+this.$route.params.id&&this.reload()}},methods:{load:function(){var t=this;console.log(this.$route.params.id),console.log(this.$store.state.id),Object(o.c)(this.$route.params.id).then(function(e){t.avatar=e.data.avatar,t.nikeName=e.data.nikeName,t.v=e.data.v,t.signature=e.data.signature}).catch(function(t){console.log(t)}),Object(a.e)(this.$store.state.id).then(function(e){t.isfollowid=e.data.id}).catch(function(t){console.log(t)}),Object(a.c)(this.$route.params.id).then(function(e){t.followCounts=e.data.followCount,t.fanCounts=e.data.fansCount,t.articlesCount=e.data.articlesCount}).catch(function(t){console.log(t)})},myfan:function(){this.$router.push({path:"/newsuser/personal/myfan/"+this.$route.params.id})},myfollow:function(){this.$router.push({path:"/newsuser/personal/myfollow/"+this.$route.params.id})},follow:function(){var t=this;this.$store.state.id?(this.followData.followId=this.$route.params.id,this.followData.fanId=this.$store.state.id,this.isfollowid.indexOf(this.followData.followId)>-1?this.isfollow=!0:this.isfollow=!1,this.isfollow?Object(a.b)(this.followData).then(function(e){t.isfollow=!1,t.$message({showClose:!0,message:"已取消关注",type:"success"}),t.reload()}).catch(function(t){console.log(t)}):this.isfollow||Object(a.a)(this.followData).then(function(e){t.isfollow=!0,t.$message({showClose:!0,message:"已成功关注",type:"success"}),t.reload()}).catch(function(t){console.log(t)})):this.$message({showClose:!0,message:"请登录后再进行操作哦",type:"warning"})},edit:function(){this.$refs.dia.open()}}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"PersonTop"},[o("div",{staticClass:"PersonTop_img"},[o("img",{directives:[{name:"image-preview",rawName:"v-image-preview"}],attrs:{src:t.avatar}})]),t._v(" "),o("div",{staticClass:"PersonTop_text"},[o("div",{staticClass:"user_text"},[o("div",{staticClass:"user_name"},[o("span",[t._v(" "+t._s(t.nikeName)+" ")])]),t._v(" "),3==t.v?o("div",{staticClass:"user-v"},[o("img",{staticClass:"user-v-img",attrs:{src:s("Jseh")}}),t._v(" "),o("span",{staticClass:"user-v-font"},[t._v("优质媒体作者")])]):t._e(),t._v(" "),o("div",{staticClass:"user_qianming"},[o("span",[t._v(" "+t._s(t.signature))])]),t._v(" "),o("div",{staticClass:"user_anniu"},[this.$route.params.id==this.$store.state.id?o("el-button",{staticClass:"el-icon-edit",attrs:{type:"primary",size:"medium",plain:""},on:{click:t.edit}},[t._v("编辑")]):o("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-check"},domProps:{textContent:t._s(t.isfollowid.indexOf(this.$route.params.id)>-1?"已关注":"关注")},on:{click:t.follow}})],1)]),t._v(" "),o("div",{staticClass:"user_num"},[o("div",{staticStyle:{cursor:"pointer"},on:{click:t.myfan}},[o("div",{staticClass:"num_number"},[t._v(t._s(t.fanCounts))]),t._v(" "),o("span",{staticClass:"num_text"},[t._v("粉丝")])]),t._v(" "),o("div",{staticStyle:{cursor:"pointer"},on:{click:t.myfollow}},[o("div",{staticClass:"num_number"},[t._v(t._s(t.followCounts))]),t._v(" "),o("span",{staticClass:"num_text"},[t._v("关注")])]),t._v(" "),o("div",[o("div",{staticClass:"num_number"},[t._v(t._s(t.articlesCount))]),t._v(" "),o("span",{staticClass:"num_text"},[t._v("发帖数")])])])])]),t._v(" "),o("div",{staticClass:"person_body"},[o("div",{staticClass:"person_body_left"},[o("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"0px"}}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",{staticClass:"person_body_list",staticStyle:{"border-bottom":"none"}},[t._v("个人中心")])]),t._v(" "),o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","active-text-color":"#00c3ff"}},[o("el-menu-item",{attrs:{index:"info",route:{name:"info",params:t.$route.params.id}}},[o("i",{staticClass:"el-icon-user"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("个人简介")])]),t._v(" "),o("el-menu-item",{attrs:{index:"myarticle",route:{name:"myarticle",params:t.$route.params.id}}},[o("i",{staticClass:"el-icon-edit-outline"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("发帖")])]),t._v(" "),o("el-menu-item",{attrs:{index:"mycollect",route:{name:"mycollect",params:t.$route.params.id}}},[o("i",{staticClass:"el-icon-document"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("收藏")])]),t._v(" "),o("el-menu-item",{attrs:{index:"myfan",route:{name:"myfan",params:t.$route.params.id}}},[o("i",{staticClass:"el-icon-tableware"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("粉丝")])]),t._v(" "),o("el-menu-item",{attrs:{index:"myfollow",route:{name:"myfollow",params:t.$route.params.id}}},[o("i",{staticClass:"el-icon-circle-plus-outline"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("关注")])])],1)],1)],1),t._v(" "),o("div",{staticClass:"person_body_right"},[o("router-view")],1)]),t._v(" "),o("personal-dia",{ref:"dia",on:{flesh:t.reload}})],1)},staticRenderFns:[]};var u=s("VU/8")(c,m,!1,function(t){s("aOVV")},"data-v-3e41664b",null);e.default=u.exports},Jseh:function(t,e,s){t.exports=s.p+"static/img/V.dbc84ba.png"},aOVV:function(t,e){}});