webpackJsonp([1],{GCKn:function(t,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=a("3nZr"),i={name:"MyFanAndFollow",inject:["reload"],data:function(){return{allData:[],isfollow:!0,followData:{fanId:"",followId:""},isfollowid:[]}},watch:{$route:function(t,o){var a=this;t.path=="/newsuser/personal/myfan/"+this.$route.params.id?Object(s.f)(this.$route.params.id).then(function(t){a.allData=t.data,Object(s.g)(a.$route.params.id).then(function(t){t.data.forEach(function(t){a.isfollowid.push(t.id)})})}).catch(function(t){console.log(t)}):Object(s.g)(this.$route.params.id).then(function(t){a.allData=t.data,t.data.forEach(function(t){a.isfollowid.push(t.id)})}).catch(function(t){console.log(t)})}},mounted:function(){this.load()},methods:{load:function(){var t=this;this.$route.path=="/newsuser/personal/myfan/"+this.$route.params.id?Object(s.f)(this.$route.params.id).then(function(o){t.allData=o.data,Object(s.g)(t.$route.params.id).then(function(o){o.data.forEach(function(o){t.isfollowid.push(o.id)})})}).catch(function(t){console.log(t)}):Object(s.g)(this.$route.params.id).then(function(o){t.allData=o.data,o.data.forEach(function(o){t.isfollowid.push(o.id)})}).catch(function(t){console.log(t)})},follow:function(t){var o=this;this.$store.state.id?this.$store.state.id==this.$route.params.id?(this.followData.followId=t,this.followData.fanId=this.$store.state.id,this.isfollowid.indexOf(this.followData.followId)>-1?this.isfollow=!0:this.isfollow=!1,this.isfollow?Object(s.b)(this.followData).then(function(t){o.isfollow=!1,o.$message({showClose:!0,message:"已取消关注",type:"success"}),o.reload()}).catch(function(t){console.log(t)}):this.isfollow||Object(s.a)(this.followData).then(function(t){o.isfollow=!0,o.$message({showClose:!0,message:"已成功关注",type:"success"}),o.reload()}).catch(function(t){console.log(t)})):this.$message({showClose:!0,message:"此页面不是你的个人中心哦",type:"warning"}):this.$message({showClose:!0,message:"请登录后再进行操作哦",type:"warning"})},personal:function(t){this.$router.push({path:"/newsuser/personal/"+t})},viewInfo:function(t){this.$router.push({path:"/newsuser/user/"+t})}}},n={render:function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"fanorfollow_box"},[t._l(t.allData,function(o,s){return a("div",{staticClass:"fanorfollow"},[a("div",{staticClass:"fanorfollow_left"},[a("img",{directives:[{name:"image-preview",rawName:"v-image-preview"}],staticClass:"fanorfollow_img",attrs:{src:o.avatar},on:{click:function(a){return t.viewInfo(o.id)}}})]),t._v(" "),a("div",{staticClass:"fanorfollow_info"},[a("div",{staticClass:"fanorfollow_info_top"},[a("span",{staticStyle:{color:"#666","max-width":"180px"},on:{click:function(a){return t.personal(o.id)}}},[t._v(t._s(o.nikeName))])]),t._v(" "),a("div",{staticClass:"fanorfollow_info_bottom"},[a("span",{on:{click:function(a){return t.personal(o.id)}}},[t._v(t._s(o.signature))])])]),t._v(" "),a("div",{staticClass:"fanorfollow_botton"},[a("el-button",{attrs:{type:"primary",size:"small",round:"",icon:"el-icon-check"},domProps:{textContent:t._s(t.isfollowid.indexOf(o.id)>-1?"已关注":"关注")},on:{click:function(a){return t.follow(o.id)}}})],1)])}),t._v(" "),a("div",[0==t.allData.length?a("el-empty",{attrs:{"image-size":250,description:"这里什么都没有哟"}}):t._e()],1)],2)},staticRenderFns:[]};var e=a("VU/8")(i,n,!1,function(t){a("IJih")},null,null);o.default=e.exports},IJih:function(t,o){}});